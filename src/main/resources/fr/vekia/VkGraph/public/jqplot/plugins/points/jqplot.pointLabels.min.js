(function($){$.jqplot.PointLabels=function(options){this.show=$.jqplot.config.enablePlugins;
this.location="n";this.labelsFromSeries=false;this.seriesLabelIndex=null;this.labels=[];
this._labels=[];this.stackedValue=false;this.ypadding=6;this.xpadding=6;this.escapeHTML=true;
this.edgeTolerance=-5;this.formatter=$.jqplot.DefaultTickFormatter;this.formatString="";
this.hideZeros=false;this._elems=[];$.extend(true,this,options)};var locations=["nw","n","ne","e","se","s","sw","w"];
var locationIndicies={nw:0,n:1,ne:2,e:3,se:4,s:5,sw:6,w:7};var oppositeLocations=["se","s","sw","w","nw","n","ne","e"];
$.jqplot.PointLabels.init=function(target,data,seriesDefaults,opts,plot){var options=$.extend(true,{},seriesDefaults,opts);
options.pointLabels=options.pointLabels||{};if(this.renderer.constructor===$.jqplot.BarRenderer&&this.barDirection==="horizontal"&&!options.pointLabels.location){options.pointLabels.location="e"
}this.plugins.pointLabels=new $.jqplot.PointLabels(options.pointLabels);this.plugins.pointLabels.setLabels.call(this)
};$.jqplot.PointLabels.prototype.setLabels=function(){var p=this.plugins.pointLabels;
var labelIdx;if(p.seriesLabelIndex!=null){labelIdx=p.seriesLabelIndex}else{if(this.renderer.constructor===$.jqplot.BarRenderer&&this.barDirection==="horizontal"){labelIdx=(this._plotData[0].length<3)?0:this._plotData[0].length-1
}else{labelIdx=(this._plotData.length===0)?0:this._plotData[0].length-1}}p._labels=[];
if(p.labels.length===0||p.labelsFromSeries){if(p.stackedValue){if(this._plotData.length&&this._plotData[0].length){for(var i=0;
i<this._plotData.length;i++){p._labels.push(this._plotData[i][labelIdx])}}}else{var d=this.data;
if(this.renderer.constructor===$.jqplot.BarRenderer&&this.waterfall){d=this._data
}if(d.length&&d[0].length){for(var i=0;i<d.length;i++){p._labels.push(d[i][labelIdx])
}}d=null}}else{if(p.labels.length){p._labels=p.labels}}};$.jqplot.PointLabels.prototype.xOffset=function(elem,location,padding){location=location||this.location;
padding=padding||this.xpadding;var offset;switch(location){case"nw":offset=-elem.outerWidth(true)-this.xpadding;
break;case"n":offset=-elem.outerWidth(true)/2;break;case"ne":offset=this.xpadding;
break;case"e":offset=this.xpadding;break;case"se":offset=this.xpadding;break;case"s":offset=-elem.outerWidth(true)/2;
break;case"sw":offset=-elem.outerWidth(true)-this.xpadding;break;case"w":offset=-elem.outerWidth(true)-this.xpadding;
break;default:offset=-elem.outerWidth(true)-this.xpadding;break}return offset};$.jqplot.PointLabels.prototype.yOffset=function(elem,location,padding){location=location||this.location;
padding=padding||this.xpadding;var offset;switch(location){case"nw":offset=-elem.outerHeight(true)-this.ypadding;
break;case"n":offset=-elem.outerHeight(true)-this.ypadding;break;case"ne":offset=-elem.outerHeight(true)-this.ypadding;
break;case"e":offset=-elem.outerHeight(true)/2;break;case"se":offset=this.ypadding;
break;case"s":offset=this.ypadding;break;case"sw":offset=this.ypadding;break;case"w":offset=-elem.outerHeight(true)/2;
break;default:offset=-elem.outerHeight(true)-this.ypadding;break}return offset};$.jqplot.PointLabels.draw=function(sctx,options,plot){var p=this.plugins.pointLabels;
p.setLabels.call(this);for(var i=0;i<p._elems.length;i++){if(p._elems[i]){p._elems[i].emptyForce()
}}p._elems.splice(0,p._elems.length);if(p.show){var ax="_"+this._stackAxis+"axis";
if(!p.formatString){p.formatString=this[ax]._ticks[0].formatString;p.formatter=this[ax]._ticks[0].formatter
}var pd=this._plotData;var ppd=this._prevPlotData;var xax=this._xaxis;var yax=this._yaxis;
var elem,helem;for(var i=0,l=p._labels.length;i<l;i++){var label=p._labels[i];if(label==null||(p.hideZeros&&parseInt(label,10)==0)){continue
}label=p.formatter(p.formatString,label);helem=document.createElement("div");p._elems[i]=$(helem);
elem=p._elems[i];elem.addClass("jqplot-point-label jqplot-series-"+this.index+" jqplot-point-"+i);
elem.css("position","absolute");if(!$.jqplot.isDarkColor(this.color)){if(p.darkColor!==undefined){elem.css("color",p.darkColor)
}else{elem.css("color","white")}}else{if(p.brightColor!==undefined){elem.css("color",p.brightColor)
}else{elem.css("color","black")}}elem.insertAfter(sctx.canvas);if(p.escapeHTML){elem.text(label)
}else{elem.html(label)}var location=p.location;if((this.fillToZero&&pd[i][1]<0)||(this.fillToZero&&this._type==="bar"&&this.barDirection==="horizontal"&&pd[i][0]<0)||(this.waterfall&&parseInt(label,10))<0){location=oppositeLocations[locationIndicies[location]]
}var ell=xax.u2p(pd[i][0])+p.xOffset(elem,location);var elt=yax.u2p(pd[i][1])+p.yOffset(elem,location);
if(this._stack&&!p.stackedValue){if(this.barDirection==="vertical"){elt=(this._barPoints[i][0][1]+this._barPoints[i][1][1])/2+plot._gridPadding.top-0.5*elem.outerHeight(true)
}else{ell=(this._barPoints[i][2][0]+this._barPoints[i][0][0])/2+plot._gridPadding.left-0.5*elem.outerWidth(true)
}}if(this.renderer.constructor==$.jqplot.BarRenderer){if(this.barDirection=="vertical"){ell+=this._barNudge
}else{elt-=this._barNudge}}elem.css("left",ell);elem.css("top",elt);var elr=ell+elem.width();
var elb=elt+elem.height();var et=p.edgeTolerance;var scl=$(sctx.canvas).position().left;
var sct=$(sctx.canvas).position().top;var scr=sctx.canvas.width+scl;var scb=sctx.canvas.height+sct;
if(ell-et<scl||elt-et<sct||elr+et>scr||elb+et>scb){elem.remove()}elem=null;helem=null
}}};$.jqplot.postSeriesInitHooks.push($.jqplot.PointLabels.init);$.jqplot.postDrawSeriesHooks.push($.jqplot.PointLabels.draw)
})(jQuery);