function getHue(a,b,c){return 180/Math.PI*Math.atan2(Math.sqrt(3)*(b-c),2*a-b-c)}function RGBToHSL(a){var b=a[0]/255,c=a[1]/255,d=a[2]/255,e=Math.min(b,c,d),f=Math.max(b,c,d),g=f-e,h=(f+e)/2;if(0==g)l=0,S=0;else{.5>h?S=g/(f+e):S=g/(2-f-e);var i=((f-b)/6+g/2)/g,j=((f-c)/6+g/2)/g,k=((f-d)/6+g/2)/g;if(b==f)var l=k-j;else if(c==f)var l=1/3+i-k;else if(d==f)var l=2/3+j-i;0>l&&(l+=1),l>1&&(l-=1)}return[l,S,h]}function HSLtoRGB(a){var b=a[0],c=a[1],d=a[2];if(0==c)var e=255*d,f=255*d,g=255*d;else{if(.5>d)var h=d*(1+c);else var h=d+c-c*d;var i=2*d-h,e=Math.floor(255*Hue_2_RGB(i,h,b+1/3)),f=Math.floor(255*Hue_2_RGB(i,h,b)),g=Math.floor(255*Hue_2_RGB(i,h,b-1/3))}return[e,f,g]}function Hue_2_RGB(a,b,c){return 0>c&&(c+=1),c>1&&(c-=1),1>6*c?a+6*(b-a)*c:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a}function hexToRGB(a){return"#"==a.charAt(0)&&(a=a.substring(1,7)),[parseInt(a.substring(0,2),16),parseInt(a.substring(2,4),16),parseInt(a.substring(4,6),16)]}function moveColor(a,b){var c=RGBToHSL(a);return c[0]=(360*c[0]+b)%360/360,HSLtoRGB(c)}function rgbToHex(a){return toHex(a[0])+toHex(a[1])+toHex(a[2])}function toHex(a){return a=parseInt(a,10),isNaN(a)?"00":(a=Math.max(0,Math.min(a,255)),"0123456789ABCDEF".charAt((a-a%16)/16)+"0123456789ABCDEF".charAt(a%16))}!function(a){function b(a){return Math.sin((a-(a-Math.PI)/8/Math.PI)/2)}function c(a,c,d,e,f){var g=0,h=c-a,i=Math.abs(h),j=d;return 0==e&&(j+=f),j>0&&i>.01&&6.282>i&&(g=parseFloat(j)/2/b(h)),g}function d(b,c,d){d=d||{},d.axesDefaults=d.axesDefaults||{},d.legend=d.legend||{},d.seriesDefaults=d.seriesDefaults||{};var e=!1;if(d.seriesDefaults.renderer==a.jqplot.PieRenderer)e=!0;else if(d.series)for(var f=0;f<d.series.length;f++)d.series[f].renderer==a.jqplot.PieRenderer&&(e=!0);e&&(d.axesDefaults.renderer=a.jqplot.PieAxisRenderer,d.legend.renderer=a.jqplot.PieLegendRenderer,d.legend.preDraw=!0,d.seriesDefaults.pointLabels={show:!1})}function e(b,c,d){for(var e=0;e<this.series.length;e++)this.series[e].renderer.constructor==a.jqplot.PieRenderer&&this.series[e].highlightMouseOver&&(this.series[e].highlightMouseDown=!1)}function f(b){for(var c=0;c<this.series.length;c++)this.series[c].seriesColors=this.seriesColors,this.series[c].colorGenerator=a.jqplot.colorGenerator}function g(b,c,d){var e=b.series[c],f=b.plugins.pieRenderer.highlightCanvas;if(f._ctx.clearRect(0,0,f._ctx.canvas.width,f._ctx.canvas.height),e._highlightedPoint=d,b.plugins.pieRenderer.highlightedSeriesIndex=c,0==e.highlightColors.length)for(var g=0;g<e.seriesColors.length;g++){for(var h=a.jqplot.getColorComponents(this.seriesColors[g]),i=[h[0],h[1],h[2]],j=i[0]+i[1]+i[2],k=0;3>k;k++)i[k]=j>570?.8*i[k]:i[k]+.3*(255-i[k]),i[k]=parseInt(i[k],10);e.highlightColors.push("rgb("+i[0]+","+i[1]+","+i[2]+")")}e.highlightColorGenerator=new a.jqplot.ColorGenerator(e.highlightColors),e.renderer.drawSlice.call(e,f._ctx,e._sliceAngles[d][0],e._sliceAngles[d][1],e.highlightColorGenerator.get(d),!1),e.highlightLabelSliceRenderer.highlight(d)}function h(a){var b=a.plugins.pieRenderer.highlightCanvas;b._ctx.clearRect(0,0,b._ctx.canvas.width,b._ctx.canvas.height);for(var c=0;c<a.series.length;c++)a.series[c]._highlightedPoint=null;a.plugins.pieRenderer.highlightedSeriesIndex=null,a.target.trigger("jqplotDataUnhighlight");for(var c=a.series.length-1;c>=0;c--)a.series[c].highlightLabelSliceRenderer.unhighlight()}function i(a,b,c,d,e){if(d){var f=[d.seriesIndex,d.pointIndex,d.data],i=jQuery.Event("jqplotDataMouseOver");if(i.pageX=a.pageX,i.pageY=a.pageY,e.target.trigger(i,f),!e.series[f[0]].highlightMouseOver||f[0]==e.plugins.pieRenderer.highlightedSeriesIndex&&f[1]==e.series[f[0]]._highlightedPoint)e.series[f[0]].highlightLabelSliceRenderer.move(f[1],i.pageX,i.pageY);else{var j=jQuery.Event("jqplotDataHighlight");j.which=a.which,j.pageX=a.pageX,j.pageY=a.pageY,e.target.trigger(j,f);for(var k=e.series.length-1;k>=0;k--)e.series[k].highlightLabelSliceRenderer.unhighlight();g(e,f[0],f[1])}}else null==d&&h(e)}function j(a,b,c,d,e){if(d){var f=[d.seriesIndex,d.pointIndex,d.data];if(e.series[f[0]].highlightMouseDown&&(f[0]!=e.plugins.pieRenderer.highlightedSeriesIndex||f[1]!=e.series[f[0]]._highlightedPoint)){var i=jQuery.Event("jqplotDataHighlight");i.which=a.which,i.pageX=a.pageX,i.pageY=a.pageY,e.target.trigger(i,f),g(e,f[0],f[1])}}else null==d&&h(e)}function k(a,b,c,d,e){var f=e.plugins.pieRenderer.highlightedSeriesIndex;null!=f&&e.series[f].highlightMouseDown&&h(e)}function l(a,b,c,d,e){if(d){var f=[d.seriesIndex,d.pointIndex,d.data],g=jQuery.Event("jqplotDataClick");g.which=a.which,g.pageX=a.pageX,g.pageY=a.pageY,e.target.trigger(g,f)}}function m(a,b,c,d,e){if(d){var f=[d.seriesIndex,d.pointIndex,d.data],g=e.plugins.pieRenderer.highlightedSeriesIndex;null!=g&&e.series[g].highlightMouseDown&&h(e);var i=jQuery.Event("jqplotDataRightClick");i.which=a.which,i.pageX=a.pageX,i.pageY=a.pageY,e.target.trigger(i,f)}}function n(){this.highlightLabelSliceRenderer=new a.jqplot.PieHighlighterLabelSliceRenderer(this),this.plugins.pieRenderer&&this.plugins.pieRenderer.highlightCanvas&&(this.plugins.pieRenderer.highlightCanvas.resetCanvas(),this.plugins.pieRenderer.highlightCanvas=null),this.plugins.pieRenderer={highlightedSeriesIndex:null},this.plugins.pieRenderer.highlightCanvas=new a.jqplot.GenericCanvas;var b=a(this.targetId+" .jqplot-data-label");b.length?a(b[0]).before(this.plugins.pieRenderer.highlightCanvas.createElement(this._gridPadding,"jqplot-pieRenderer-highlight-canvas",this._plotDimensions,this)):this.eventCanvas._elem.before(this.plugins.pieRenderer.highlightCanvas.createElement(this._gridPadding,"jqplot-pieRenderer-highlight-canvas",this._plotDimensions,this));this.plugins.pieRenderer.highlightCanvas.setContext()}a.jqplot.PieRenderer=function(){a.jqplot.LineRenderer.call(this)},a.jqplot.PieRenderer.prototype=new a.jqplot.LineRenderer,a.jqplot.PieRenderer.prototype.constructor=a.jqplot.PieRenderer,a.jqplot.PieRenderer.prototype.init=function(b,c){if(this.diameter=null,this.padding=20,this.sliceMargin=0,this.fill=!0,this.shadowOffset=2,this.shadowAlpha=.07,this.shadowDepth=5,this.highlightMouseOver=!0,this.highlightMouseDown=!1,this.highlightColors=[],this.dataLabels="percent",this.showDataLabels=!1,this.dataLabelFormatString=null,this.dataLabelThreshold=3,this.dataLabelPositionFactor=.52,this.dataLabelNudge=2,this.dataLabelCenterOn=!0,1==this.showDataCategoryOnHover,this.startAngle=0,this.tickRenderer=a.jqplot.PieTickRenderer,this._drawData=!0,this._type="pie",b.highlightMouseDown&&null==b.highlightMouseOver&&(b.highlightMouseOver=!1),a.extend(!0,this,b),this.sliceMargin<0&&(this.sliceMargin=0),this._diameter=null,this._radius=null,this._sliceAngles=[],this._highlightedPoint=null,this.highlightLabelSliceRenderer=new a.jqplot.PieHighlighterLabelSliceRenderer(this),this.labelsSlices=[],0==this.highlightColors.length)for(var d=0;d<this.seriesColors.length;d++){for(var g=a.jqplot.getColorComponents(this.seriesColors[d]),h=[g[0],g[1],g[2]],o=h[0]+h[1]+h[2],p=0;3>p;p++)h[p]=o>570?.8*h[p]:h[p]+.3*(255-h[p]),h[p]=parseInt(h[p],10);this.highlightColors.push("rgb("+h[0]+","+h[1]+","+h[2]+")")}this.highlightColorGenerator=new a.jqplot.ColorGenerator(this.highlightColors),c.postParseOptionsHooks.addOnce(f),c.postInitHooks.addOnce(e),c.eventListenerHooks.addOnce("jqplotMouseMove",i),c.eventListenerHooks.addOnce("jqplotMouseDown",j),c.eventListenerHooks.addOnce("jqplotMouseUp",k),c.eventListenerHooks.addOnce("jqplotClick",l),c.eventListenerHooks.addOnce("jqplotRightClick",m),c.postDrawHooks.addOnce(n)},a.jqplot.PieRenderer.prototype.setGridData=function(a){var b=[],c=[],d=(this.startAngle/180*Math.PI,0);this._drawData=!1;for(var e=0;e<this.data.length;e++)0!=this.data[e][1]&&(this._drawData=!0),b.push(this.data[e][1]),c.push([this.data[e][0]]),e>0&&(b[e]+=b[e-1]),d+=this.data[e][1];for(var f=2*Math.PI/b[b.length-1],e=0;e<b.length;e++)c[e][1]=b[e]*f,c[e][2]=this.data[e][1]/d;this.gridData=c},a.jqplot.PieRenderer.prototype.makeGridData=function(a,b){var c=[],d=[],e=0;this.startAngle/180*Math.PI;this._drawData=!1;for(var f=0;f<a.length;f++)0!=this.data[f][1]&&(this._drawData=!0),c.push(a[f][1]),d.push([a[f][0]]),f>0&&(c[f]+=c[f-1]),e+=a[f][1];for(var g=2*Math.PI/c[c.length-1],f=0;f<c.length;f++)d[f][1]=c[f]*g,d[f][2]=a[f][1]/e;return d},a.jqplot.PieRenderer.prototype.drawSlice=function(a,b,d,e,f){function g(c){d>6.282+this.startAngle&&(d=6.282+this.startAngle,b>d&&(b=6.281+this.startAngle)),b>=d||(a.beginPath(),a.fillStyle=e,a.strokeStyle=e,a.lineWidth=j,a.arc(0,0,c,b,d,!1),a.lineTo(0,0),a.closePath(),i?a.fill():a.stroke())}if(this._drawData){var h=this._radius,i=this.fill,j=this.lineWidth,k=this.sliceMargin;0==this.fill&&(k+=this.lineWidth),a.save(),a.translate(this._center[0],this._center[1]);var l=c(b,d,this.sliceMargin,this.fill,this.lineWidth),m=l*Math.cos((b+d)/2),n=l*Math.sin((b+d)/2);if(d-b<=Math.PI?h-=l:h+=l,a.translate(m,n),f){for(var o=0,p=this.shadowDepth;p>o;o++)a.save(),a.translate(this.shadowOffset*Math.cos(this.shadowAngle/180*Math.PI),this.shadowOffset*Math.sin(this.shadowAngle/180*Math.PI)),g(h);for(var o=0,p=this.shadowDepth;p>o;o++)a.restore()}else g(h);a.restore()}},a.jqplot.PieHighlighterLabelSliceRenderer=function(a){this.serie=a},a.jqplot.PieHighlighterLabelSliceRenderer.prototype.highlight=function(a){this.serie.labelsSlices[a]&&this.serie.labelsSlices[a].removeClass("hidden")},a.jqplot.PieHighlighterLabelSliceRenderer.prototype.unhighlight=function(a){for(var b=this.serie.labelsSlices.length-1;b>=0;b--)this.serie.labelsSlices&&this.serie.labelsSlices[b].addClass("hidden")},a.jqplot.PieHighlighterLabelSliceRenderer.prototype.move=function(a,b,c){if(this.serie.labelsSlices[a]){var d=(this.serie.labelsSlices[a].position(),this.serie.labelsSlices[a].find(".tooltip")),e=-d.height()-this.serie.labelsSlices[a].height()/2,f=-(d.width()/2)-this.serie.labelsSlices[a].width()/2;d.css({"margin-left":f+"px","margin-top":e+"px"})}},a.jqplot.PieRenderer.prototype.draw=function(b,d,e,f){this.labelsSlices=[];var g,h=void 0!=e?e:{},i=0,j=0,k=1,l=new a.jqplot.ColorGenerator(this.seriesColors);if(e.legendInfo&&"insideGrid"==e.legendInfo.placement){var m=e.legendInfo;switch(m.location){case"nw":i=m.width+m.xoffset;break;case"w":i=m.width+m.xoffset;break;case"sw":i=m.width+m.xoffset;break;case"ne":i=m.width+m.xoffset,k=-1;break;case"e":i=m.width+m.xoffset,k=-1;break;case"se":i=m.width+m.xoffset,k=-1;break;case"n":j=m.height+m.yoffset;break;case"s":j=m.height+m.yoffset,k=-1}}var n=(void 0!=h.shadow?h.shadow:this.shadow,void 0!=h.fill?h.fill:this.fill,b.canvas.width),o=b.canvas.height,p=n-i-2*this.padding,q=o-j-2*this.padding,r=Math.min(p,q),s=r;this._sliceAngles=[];var t=this.sliceMargin;0==this.fill&&(t+=this.lineWidth);for(var u,v,w,x,y=0,z=this.startAngle/180*Math.PI,g=0,A=d.length;A>g;g++)v=0==g?z:d[g-1][1]+z,w=d[g][1]+z,this._sliceAngles.push([v,w]),u=c(v,w,this.sliceMargin,this.fill,this.lineWidth),Math.abs(w-v)>Math.PI&&(y=Math.max(u,y));if(null!=this.diameter&&this.diameter>0?this._diameter=this.diameter-2*y:this._diameter=s-2*y,this._diameter<6)return void a.jqplot.log("Diameter of pie too small, not rendering.");this._radius=this._diameter/2;if(this._center=[(n-k*i)/2+k*i+y*Math.cos(z),(o-k*j)/2+k*j+y*Math.sin(z)],this.shadow)for(var g=0,A=d.length;A>g;g++)x="rgba(0,0,0,"+this.shadowAlpha+")",this.renderer.drawSlice.call(this,b,this._sliceAngles[g][0],this._sliceAngles[g][1],x,!0);for(var g=0;g<d.length;g++){var B=l.next();if("complementary"==this.labelColor)var C="#"+rgbToHex(moveColor(hexToRGB(B),180));else if(""!=h.labelColor)var C=this.labelColor;else var C="#FFFFFF";if(this.renderer.drawSlice.call(this,b,this._sliceAngles[g][0],this._sliceAngles[g][1],B,!1),this.showDataLabels&&100*d[g][2]>=this.dataLabelThreshold){var D,E,F=(this._sliceAngles[g][0]+this._sliceAngles[g][1])/2;"label"==this.dataLabels?(D=this.dataLabelFormatString||"%s",E=a.jqplot.sprintf(D,d[g][0])):"value"==this.dataLabels?(D=this.dataLabelFormatString||"%d",E=a.jqplot.sprintf(D,this.data[g][1])):"percent"==this.dataLabels?(D=this.dataLabelFormatString||"%d%%",E=a.jqplot.sprintf(D,100*d[g][2])):this.dataLabels.constructor==Array&&(D=this.dataLabelFormatString||"%s",E=a.jqplot.sprintf(D,this.dataLabels[g]));var G,H=this._radius*this.dataLabelPositionFactor+this.sliceMargin+this.dataLabelNudge,I=this._center[0]+Math.cos(F)*H+this.canvas._offsets.left,J=this._center[1]+Math.sin(F)*H+this.canvas._offsets.top;if(this.showDataCategoryOnHover){var K=this.dataLabelFormatString||"%s";labelTooltip=a.jqplot.sprintf(K,d[g][0]);var L='<span class="tooltip" style="position:absolute;color:'+C+';">'+labelTooltip+"</span>",M='<span class="jqplot-pie-series jqplot-data-label" style="position:absolute;color:'+C+';">'+E+L+NaN,G=a(M).insertBefore(f.eventCanvas._elem);this.labelsSlices.push(G),G.addClass("jqplot-pie-show-hover hidden")}else G=a('<div class="jqplot-pie-series jqplot-data-label" style="position:absolute;color:'+C+';">'+E+"</div>").insertBefore(f.eventCanvas._elem);this.dataLabelCenterOn?(I-=G.width()/2,J-=G.height()/2):(I-=G.width()*Math.sin(F/2),J-=G.height()/2),I=Math.round(I),J=Math.round(J),G.css({left:I,top:J})}else if(this.showDataCategoryOnHover&&100*d[g][2]>=this.dataLabelThreshold){var D,E,F=(this._sliceAngles[g][0]+this._sliceAngles[g][1])/2;"label"==this.dataLabels?(D=this.dataLabelFormatString||"%s",E=a.jqplot.sprintf(D,d[g][0])):"value"==this.dataLabels?(D=this.dataLabelFormatString||"%d",E=a.jqplot.sprintf(D,this.data[g][1])):"percent"==this.dataLabels?(D=this.dataLabelFormatString||"%d%%",E=a.jqplot.sprintf(D,100*d[g][2])):this.dataLabels.constructor==Array&&(D=this.dataLabelFormatString||"%s",E=a.jqplot.sprintf(D,this.dataLabels[g]));var G,H=this._radius*this.dataLabelPositionFactor+this.sliceMargin+this.dataLabelNudge,I=this._center[0]+Math.cos(F)*H+this.canvas._offsets.left,J=this._center[1]+Math.sin(F)*H+this.canvas._offsets.top,K=this.dataLabelFormatString||"%s";labelTooltip=a.jqplot.sprintf(K,d[g][0]);var L='<span class="tooltip" style="position:absolute;color:'+C+';">'+labelTooltip+"</span>",M='<span class="jqplot-pie-series jqplot-data-label" style="position:absolute;color:'+C+';">'+E+L+NaN,G=a(M).insertBefore(f.eventCanvas._elem);this.labelsSlices.push(G),G.addClass("jqplot-pie-show-hover hidden")}}},a.jqplot.PieAxisRenderer=function(){a.jqplot.LinearAxisRenderer.call(this)},a.jqplot.PieAxisRenderer.prototype=new a.jqplot.LinearAxisRenderer,a.jqplot.PieAxisRenderer.prototype.constructor=a.jqplot.PieAxisRenderer,a.jqplot.PieAxisRenderer.prototype.init=function(b){this.tickRenderer=a.jqplot.PieTickRenderer,a.extend(!0,this,b),this._dataBounds={min:0,max:100},this.min=0,this.max=100,this.showTicks=!1,this.ticks=[],this.showMark=!1,this.show=!1},a.jqplot.PieLegendRenderer=function(){a.jqplot.TableLegendRenderer.call(this)},a.jqplot.PieLegendRenderer.prototype=new a.jqplot.TableLegendRenderer,a.jqplot.PieLegendRenderer.prototype.constructor=a.jqplot.PieLegendRenderer,a.jqplot.PieLegendRenderer.prototype.init=function(b){this.numberRows=null,this.numberColumns=null,a.extend(!0,this,b)},a.jqplot.PieLegendRenderer.prototype.draw=function(){if(this.show){var b=this._series;this._elem=a(document.createElement("table")),this._elem.addClass("jqplot-table-legend");var c={position:"absolute"};this.background&&(c.background=this.background),this.border&&(c.border=this.border),this.fontSize&&(c.fontSize=this.fontSize),this.fontFamily&&(c.fontFamily=this.fontFamily),this.textColor&&(c.textColor=this.textColor),null!=this.marginTop&&(c.marginTop=this.marginTop),null!=this.marginBottom&&(c.marginBottom=this.marginBottom),null!=this.marginLeft&&(c.marginLeft=this.marginLeft),null!=this.marginRight&&(c.marginRight=this.marginRight),this._elem.css(c);var d,e,f=!1,g=!1,h=b[0],i=new a.jqplot.ColorGenerator(h.seriesColors);if(h.show){var j=h.data;this.numberRows?(d=this.numberRows,e=this.numberColumns?this.numberColumns:Math.ceil(j.length/d)):this.numberColumns?(e=this.numberColumns,d=Math.ceil(j.length/this.numberColumns)):(d=j.length,e=1);var k,l,m,n,o,p,q,r,s,t,u=0;for(k=0;d>k;k++)for(m=a(document.createElement("tr")),m.addClass("jqplot-table-legend"),g?m.prependTo(this._elem):m.appendTo(this._elem),l=0;e>l;l++)u<j.length&&(p=this.labels[u]||j[u][0].toString(),r=i.next(),f=g?k==d-1?!1:!0:k>0?!0:!1,q=f?this.rowSpacing:"0",n=a(document.createElement("td")),n.addClass("jqplot-table-legend jqplot-table-legend-swatch"),n.css({textAlign:"center",paddingTop:q}),s=a(document.createElement("div")),s.addClass("jqplot-table-legend-swatch-outline"),t=a(document.createElement("div")),t.addClass("jqplot-table-legend-swatch"),t.css({backgroundColor:r,borderColor:r}),n.append(s.append(t)),o=a(document.createElement("td")),o.addClass("jqplot-table-legend jqplot-table-legend-label"),o.css("paddingTop",q),this.escapeHtml?o.text(p):o.html(p),g?(o.prependTo(m),n.prependTo(m)):(n.appendTo(m),o.appendTo(m)),f=!0),u++}}return this._elem},a.jqplot.PieRenderer.prototype.handleMove=function(a,b,c,d,e){if(d){var f=[d.seriesIndex,d.pointIndex,d.data];e.target.trigger("jqplotDataMouseOver",f),!e.series[f[0]].highlightMouseOver||f[0]==e.plugins.pieRenderer.highlightedSeriesIndex&&f[1]==e.series[f[0]]._highlightedPoint||(e.target.trigger("jqplotDataHighlight",f),g(e,f[0],f[1]))}else null==d&&h(e)},a.jqplot.preInitHooks.push(d),a.jqplot.PieTickRenderer=function(){a.jqplot.AxisTickRenderer.call(this)},a.jqplot.PieTickRenderer.prototype=new a.jqplot.AxisTickRenderer,a.jqplot.PieTickRenderer.prototype.constructor=a.jqplot.PieTickRenderer}(jQuery);