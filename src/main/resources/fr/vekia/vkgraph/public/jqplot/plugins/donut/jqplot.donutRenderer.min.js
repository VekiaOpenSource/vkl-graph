!function(a){function b(b,c,d){d=d||{},d.axesDefaults=d.axesDefaults||{},d.legend=d.legend||{},d.seriesDefaults=d.seriesDefaults||{};var e=!1;if(d.seriesDefaults.renderer==a.jqplot.DonutRenderer)e=!0;else if(d.series)for(var f=0;f<d.series.length;f++)d.series[f].renderer==a.jqplot.DonutRenderer&&(e=!0);e&&(d.axesDefaults.renderer=a.jqplot.DonutAxisRenderer,d.legend.renderer=a.jqplot.DonutLegendRenderer,d.legend.preDraw=!0,d.seriesDefaults.pointLabels={show:!1})}function c(b,c,d){for(var e=1;e<this.series.length;e++)if(!this.series[e]._previousSeries.length)for(var f=0;e>f;f++)this.series[e].renderer.constructor==a.jqplot.DonutRenderer&&this.series[f].renderer.constructor==a.jqplot.DonutRenderer&&this.series[e]._previousSeries.push(this.series[f]);for(e=0;e<this.series.length;e++)this.series[e].renderer.constructor==a.jqplot.DonutRenderer&&(this.series[e]._numberSeries=this.series.length,this.series[e].highlightMouseOver&&(this.series[e].highlightMouseDown=!1))}function d(b){for(var c=0;c<this.series.length;c++)this.series[c].seriesColors=this.seriesColors,this.series[c].colorGenerator=a.jqplot.colorGenerator}function e(a,b,c){var d=a.series[b],e=a.plugins.donutRenderer.highlightCanvas;e._ctx.clearRect(0,0,e._ctx.canvas.width,e._ctx.canvas.height),d._highlightedPoint=c,a.plugins.donutRenderer.highlightedSeriesIndex=b,d.renderer.drawSlice.call(d,e._ctx,d._sliceAngles[c][0],d._sliceAngles[c][1],d.highlightColors[c],!1),d.highlightLabelSliceRenderer.highlight(c)}function f(a){var b=a.plugins.donutRenderer.highlightCanvas;b._ctx.clearRect(0,0,b._ctx.canvas.width,b._ctx.canvas.height);for(var c=0;c<a.series.length;c++)a.series[c]._highlightedPoint=null;a.plugins.donutRenderer.highlightedSeriesIndex=null,a.target.trigger("jqplotDataUnhighlight");for(var c=a.series.length-1;c>=0;c--)a.series[c].highlightLabelSliceRenderer.unhighlight()}function g(a,b,c,d,g){if(d){var h=[d.seriesIndex,d.pointIndex,d.data],i=jQuery.Event("jqplotDataMouseOver");if(i.pageX=a.pageX,i.pageY=a.pageY,g.target.trigger(i,h),!g.series[h[0]].highlightMouseOver||h[0]==g.plugins.donutRenderer.highlightedSeriesIndex&&h[1]==g.series[h[0]]._highlightedPoint)g.series[h[0]].highlightLabelSliceRenderer.move(h[1],i.pageX,i.pageY);else{var j=jQuery.Event("jqplotDataHighlight");j.pageX=a.pageX,j.pageY=a.pageY,g.target.trigger(j,h);for(var k=g.series.length-1;k>=0;k--)g.series[k].highlightLabelSliceRenderer.unhighlight();e(g,h[0],h[1])}}else null==d&&f(g)}function h(a,b,c,d,g){if(d){var h=[d.seriesIndex,d.pointIndex,d.data];if(g.series[h[0]].highlightMouseDown&&(h[0]!=g.plugins.donutRenderer.highlightedSeriesIndex||h[1]!=g.series[h[0]]._highlightedPoint)){var i=jQuery.Event("jqplotDataHighlight");i.pageX=a.pageX,i.pageY=a.pageY,g.target.trigger(i,h),e(g,h[0],h[1])}}else null==d&&f(g)}function i(a,b,c,d,e){var g=e.plugins.donutRenderer.highlightedSeriesIndex;null!=g&&e.series[g].highlightMouseDown&&f(e)}function j(a,b,c,d,e){if(d){var f=[d.seriesIndex,d.pointIndex,d.data],g=jQuery.Event("jqplotDataClick");g.pageX=a.pageX,g.pageY=a.pageY,e.target.trigger(g,f)}}function k(a,b,c,d,e){if(d){var g=[d.seriesIndex,d.pointIndex,d.data],h=e.plugins.donutRenderer.highlightedSeriesIndex;null!=h&&e.series[h].highlightMouseDown&&f(e);var i=jQuery.Event("jqplotDataRightClick");i.pageX=a.pageX,i.pageY=a.pageY,e.target.trigger(i,g)}}function l(){this.highlightLabelSliceRenderer=new a.jqplot.DonutHighlighterLabelSliceRenderer(this),this.plugins.donutRenderer&&this.plugins.donutRenderer.highlightCanvas&&(this.plugins.donutRenderer.highlightCanvas.resetCanvas(),this.plugins.donutRenderer.highlightCanvas=null),this.plugins.donutRenderer={highlightedSeriesIndex:null},this.plugins.donutRenderer.highlightCanvas=new a.jqplot.GenericCanvas;var b=a(this.targetId+" .jqplot-data-label");b.length?a(b[0]).before(this.plugins.donutRenderer.highlightCanvas.createElement(this._gridPadding,"jqplot-donutRenderer-highlight-canvas",this._plotDimensions,this)):this.eventCanvas._elem.before(this.plugins.donutRenderer.highlightCanvas.createElement(this._gridPadding,"jqplot-donutRenderer-highlight-canvas",this._plotDimensions,this));this.plugins.donutRenderer.highlightCanvas.setContext();this.eventCanvas._elem.bind("mouseleave",{plot:this},function(a){f(a.data.plot)})}a.jqplot.DonutRenderer=function(){a.jqplot.LineRenderer.call(this)},a.jqplot.DonutRenderer.prototype=new a.jqplot.LineRenderer,a.jqplot.DonutRenderer.prototype.constructor=a.jqplot.DonutRenderer,a.jqplot.DonutRenderer.prototype.init=function(b,e){if(this.diameter=null,this.innerDiameter=null,this.thickness=null,this.padding=20,this.sliceMargin=0,this.ringMargin=null,this.fill=!0,this.shadowOffset=2,this.shadowAlpha=.07,this.shadowDepth=5,this.highlightMouseOver=!0,this.highlightMouseDown=!1,this.highlightColors=[],this.dataLabels="percent",this.showDataLabels=!1,1==this.showDataCategoryOnHover,this.dataLabelFormatString=null,this.dataLabelThreshold=3,this.dataLabelPositionFactor=.4,this.dataLabelNudge=0,this.startAngle=0,this.tickRenderer=a.jqplot.DonutTickRenderer,this._drawData=!0,this._type="donut",b.highlightMouseDown&&null==b.highlightMouseOver&&(b.highlightMouseOver=!1),a.extend(!0,this,b),null!=this.diameter&&(this.diameter=this.diameter-this.sliceMargin),this._diameter=null,this._innerDiameter=null,this._radius=null,this._innerRadius=null,this._thickness=null,this._previousSeries=[],this._numberSeries=1,this._sliceAngles=[],this._highlightedPoint=null,this.highlightLabelSliceRenderer=new a.jqplot.DonutHighlighterLabelSliceRenderer(this),this.labelsSlices=[],0==this.highlightColors.length)for(var f=0;f<this.seriesColors.length;f++){for(var m=a.jqplot.getColorComponents(this.seriesColors[f]),n=[m[0],m[1],m[2]],o=n[0]+n[1]+n[2],p=0;3>p;p++)n[p]=o>570?.8*n[p]:n[p]+.3*(255-n[p]),n[p]=parseInt(n[p],10);this.highlightColors.push("rgb("+n[0]+","+n[1]+","+n[2]+")")}e.postParseOptionsHooks.addOnce(d),e.postInitHooks.addOnce(c),e.eventListenerHooks.addOnce("jqplotMouseMove",g),e.eventListenerHooks.addOnce("jqplotMouseDown",h),e.eventListenerHooks.addOnce("jqplotMouseUp",i),e.eventListenerHooks.addOnce("jqplotClick",j),e.eventListenerHooks.addOnce("jqplotRightClick",k),e.postDrawHooks.addOnce(l)},a.jqplot.DonutRenderer.prototype.setGridData=function(a){var b=[],c=[],d=(this.startAngle/180*Math.PI,0);this._drawData=!1;for(var e=0;e<this.data.length;e++)0!=this.data[e][1]&&(this._drawData=!0),b.push(this.data[e][1]),c.push([this.data[e][0]]),e>0&&(b[e]+=b[e-1]),d+=this.data[e][1];for(var f=2*Math.PI/b[b.length-1],e=0;e<b.length;e++)c[e][1]=b[e]*f,c[e][2]=this.data[e][1]/d;this.gridData=c},a.jqplot.DonutRenderer.prototype.makeGridData=function(a,b){var c=[],d=[],e=0;this.startAngle/180*Math.PI;this._drawData=!1;for(var f=0;f<a.length;f++)0!=this.data[f][1]&&(this._drawData=!0),c.push(a[f][1]),d.push([a[f][0]]),f>0&&(c[f]+=c[f-1]),e+=a[f][1];for(var g=2*Math.PI/c[c.length-1],f=0;f<c.length;f++)d[f][1]=c[f]*g,d[f][2]=a[f][1]/e;return d},a.jqplot.DonutRenderer.prototype.drawSlice=function(a,b,c,d,e){function f(){c>6.282+this.startAngle&&(c=6.282+this.startAngle,b>c&&(b=6.281+this.startAngle)),b>=c||(a.beginPath(),a.fillStyle=d,a.strokeStyle=d,a.arc(0,0,g,b,c,!1),a.lineTo(h*Math.cos(c),h*Math.sin(c)),a.arc(0,0,h,c,b,!0),a.closePath(),i?a.fill():a.stroke())}var g=this._diameter/2,h=g-this._thickness,i=this.fill;if(a.save(),a.translate(this._center[0],this._center[1]),e)for(var j=0;j<this.shadowDepth;j++)a.save(),a.translate(this.shadowOffset*Math.cos(this.shadowAngle/180*Math.PI),this.shadowOffset*Math.sin(this.shadowAngle/180*Math.PI)),f();else f();if(e)for(var j=0;j<this.shadowDepth;j++)a.restore();a.restore()},a.jqplot.DonutHighlighterLabelSliceRenderer=function(a){this.serie=a},a.jqplot.DonutHighlighterLabelSliceRenderer.prototype.highlight=function(a){this.serie.labelsSlices[a].find(".tooltip").removeClass("hidden")},a.jqplot.DonutHighlighterLabelSliceRenderer.prototype.unhighlight=function(a){for(var b=this.serie.labelsSlices.length-1;b>=0;b--)this.serie.labelsSlices[b].find(".tooltip").addClass("hidden")},a.jqplot.DonutHighlighterLabelSliceRenderer.prototype.move=function(a,b,c){var d=this.serie.labelsSlices[a].find(".tooltip");d.css({left:b-d.width()/2+"px",top:c-(d.height()+15)+"px"})},a.jqplot.DonutRenderer.prototype.draw=function(b,c,d,e){this.labelsSlices=[];var f,g=void 0!=d?d:{},h=0,i=0,j=1,k=new a.jqplot.ColorGenerator(this.seriesColors);if(d.legendInfo&&"insideGrid"==d.legendInfo.placement){var l=d.legendInfo;switch(l.location){case"nw":h=l.width+l.xoffset;break;case"w":h=l.width+l.xoffset;break;case"sw":h=l.width+l.xoffset;break;case"ne":h=l.width+l.xoffset,j=-1;break;case"e":h=l.width+l.xoffset,j=-1;break;case"se":h=l.width+l.xoffset,j=-1;break;case"n":i=l.height+l.yoffset;break;case"s":i=l.height+l.yoffset,j=-1}}for(var m=(void 0!=g.shadow?g.shadow:this.shadow,void 0!=g.showLine?g.showLine:this.showLine,void 0!=g.fill?g.fill:this.fill,b.canvas.width),n=b.canvas.height,o=m-h-2*this.padding,p=n-i-2*this.padding,q=Math.min(o,p),r=q,s=null==this.ringMargin?2*this.sliceMargin:this.ringMargin,f=0;f<this._previousSeries.length;f++)r-=2*this._previousSeries[f]._thickness+2*s;if(this._diameter=this.diameter||r,null!=this.innerDiameter){var t=this._numberSeries>1&&this.index>0?this._previousSeries[0]._diameter:this._diameter;this._thickness=this.thickness||(t-this.innerDiameter-2*s*this._numberSeries)/this._numberSeries/2}else this._thickness=this.thickness||q/2/(this._numberSeries+1)*.85;this._radius=this._diameter/2;this._innerRadius=this._radius-this._thickness;var u=this.startAngle/180*Math.PI;if(this._center=[(m-j*h)/2+j*h,(n-j*i)/2+j*i],this.shadow)for(var v="rgba(0,0,0,"+this.shadowAlpha+")",f=0;f<c.length;f++){var w=0==f?u:c[f-1][1]+u;w+=this.sliceMargin/180*Math.PI,this.renderer.drawSlice.call(this,b,w,c[f][1]+u,v,!0)}for(var f=0;f<c.length;f++){var w=0==f?u:c[f-1][1]+u,x=k.next();w+=this.sliceMargin/180*Math.PI;var y=c[f][1]+u;if(this._sliceAngles.push([w,y]),this.renderer.drawSlice.call(this,b,w,y,x,!1),this.showDataLabels&&100*c[f][2]>=this.dataLabelThreshold){var z,A,B=(w+y)/2;"label"==this.dataLabels?(z=this.dataLabelFormatString||"%s",A=a.jqplot.sprintf(z,c[f][0])):"value"==this.dataLabels?(z=this.dataLabelFormatString||"%d",A=a.jqplot.sprintf(z,this.data[f][1])):"percent"==this.dataLabels?(z=this.dataLabelFormatString||"%d%%",A=a.jqplot.sprintf(z,100*c[f][2])):this.dataLabels.constructor==Array&&(z=this.dataLabelFormatString||"%s",A=a.jqplot.sprintf(z,this.dataLabels[f]));var C,D=this._innerRadius+this._thickness*this.dataLabelPositionFactor+this.sliceMargin+this.dataLabelNudge,E=this._center[0]+Math.cos(B)*D+this.canvas._offsets.left,F=this._center[1]+Math.sin(B)*D+this.canvas._offsets.top;if(this.showDataCategoryOnHover){var G=this.dataLabelFormatString||"%s";labelTooltip=a.jqplot.sprintf(G,c[f][0]);var H='<span class="hidden tooltip">'+labelTooltip+"</span>",I='<span class="jqplot-donut-series jqplot-data-label" style="position:absolute;">'+A+H+NaN,C=a(I).insertBefore(e.eventCanvas._elem);this.labelsSlices.push(C),C.addClass("jqplot-donut-show-hover")}else var C=a('<span class="jqplot-donut-series jqplot-data-label" style="position:absolute;">'+A+"</span>").insertBefore(e.eventCanvas._elem);E-=C.width()/2,F-=C.height()/2,E=Math.round(E),F=Math.round(F),C.css({left:E,top:F})}}},a.jqplot.DonutAxisRenderer=function(){a.jqplot.LinearAxisRenderer.call(this)},a.jqplot.DonutAxisRenderer.prototype=new a.jqplot.LinearAxisRenderer,a.jqplot.DonutAxisRenderer.prototype.constructor=a.jqplot.DonutAxisRenderer,a.jqplot.DonutAxisRenderer.prototype.init=function(b){this.tickRenderer=a.jqplot.DonutTickRenderer,a.extend(!0,this,b),this._dataBounds={min:0,max:100},this.min=0,this.max=100,this.showTicks=!1,this.ticks=[],this.showMark=!1,this.show=!1},a.jqplot.DonutLegendRenderer=function(){a.jqplot.TableLegendRenderer.call(this)},a.jqplot.DonutLegendRenderer.prototype=new a.jqplot.TableLegendRenderer,a.jqplot.DonutLegendRenderer.prototype.constructor=a.jqplot.DonutLegendRenderer,a.jqplot.DonutLegendRenderer.prototype.init=function(b){this.numberRows=null,this.numberColumns=null,a.extend(!0,this,b)},a.jqplot.DonutLegendRenderer.prototype.draw=function(){if(this.show){var b=this._series,c="position:absolute;";c+=this.background?"background:"+this.background+";":"",c+=this.border?"border:"+this.border+";":"",c+=this.fontSize?"font-size:"+this.fontSize+";":"",c+=this.fontFamily?"font-family:"+this.fontFamily+";":"",c+=this.textColor?"color:"+this.textColor+";":"",c+=null!=this.marginTop?"margin-top:"+this.marginTop+";":"",c+=null!=this.marginBottom?"margin-bottom:"+this.marginBottom+";":"",c+=null!=this.marginLeft?"margin-left:"+this.marginLeft+";":"",c+=null!=this.marginRight?"margin-right:"+this.marginRight+";":"",this._elem=a('<table class="jqplot-table-legend" style="'+c+'"></table>');for(var d,e,f=!1,g=!1,h=0;h<=b.length-1;h+=1){var i=b[h],j=new a.jqplot.ColorGenerator(i.seriesColors);if(i.show){var k=i.data;this.numberRows?(d=this.numberRows,e=this.numberColumns?this.numberColumns:Math.ceil(k.length/d)):this.numberColumns?(e=this.numberColumns,d=Math.ceil(k.length/this.numberColumns)):(d=k.length,e=1);var l,m,n,o,p,q,r,s,t=0;for(l=0;d>l;l++)for(n=g?a('<tr class="jqplot-table-legend"></tr>').prependTo(this._elem):a('<tr class="jqplot-table-legend"></tr>').appendTo(this._elem),m=0;e>m;m++)t<k.length&&(q=this.labels[t]||k[t][0].toString(),s=j.next(),f=g?l==d-1?!1:!0:l>0?!0:!1,r=f?this.rowSpacing:"0",o=a('<td class="jqplot-table-legend jqplot-table-legend-swatch" style="text-align:center;padding-top:'+r+';"><div class="jqplot-table-legend-swatch-outline"><div class="jqplot-table-legend-swatch" style="border-color:'+s+';"></div></div></td>'),p=a('<td class="jqplot-table-legend jqplot-table-legend-label" style="padding-top:'+r+';"></td>'),this.escapeHtml?p.text(q):p.html(q),g?(p.prependTo(n),o.prependTo(n)):(o.appendTo(n),p.appendTo(n)),f=!0),t++}}}return this._elem};a.jqplot.preInitHooks.push(b),a.jqplot.DonutTickRenderer=function(){a.jqplot.AxisTickRenderer.call(this)},a.jqplot.DonutTickRenderer.prototype=new a.jqplot.AxisTickRenderer,a.jqplot.DonutTickRenderer.prototype.constructor=a.jqplot.DonutTickRenderer}(jQuery);