!function(a){"use strict";var b=function(){var b,d,e=this;for(b=0;b<e.series.length;b++)a(e.series[b]).on("SerieShow",function(b){d=a.Event("jqplotSerieShow",{id:b.id}),a(e).trigger(d),c(b.id,e)}),a(e.series[b]).on("SerieHide",function(b){d=a.Event("jqplotSerieHide",{id:b.id}),a(e).trigger(d),c(b.id,e)})},c=function(a,b){var c=b.series[a];c.canvas._elem.is(":hidden")||!c.show?(("undefined"==typeof b.options.legend.showSwatches||b.options.legend.showSwatches===!0)&&b.legend._elem.find("td").eq(2*a).addClass("jqplot-series-hidden"),("undefined"==typeof b.options.legend.showLabels||b.options.legend.showLabels===!0)&&b.legend._elem.find("td").eq(2*a+1).addClass("jqplot-series-hidden")):(("undefined"==typeof b.options.legend.showSwatches||b.options.legend.showSwatches===!0)&&b.legend._elem.find("td").eq(2*a).removeClass("jqplot-series-hidden"),("undefined"==typeof b.options.legend.showLabels||b.options.legend.showLabels===!0)&&b.legend._elem.find("td").eq(2*a+1).removeClass("jqplot-series-hidden"))},d=function(){var b;this.legend.renderer.constructor===a.jqplot.EnhancedLegendRenderer&&this.legend.seriesToggle&&this.legend._elem&&(b=this.legend._elem.detach(),this.eventCanvas._elem.after(b))},e=function(a){var b,c,d,e,f,g,h,i;for(b=a.data.plot,c=b.eventCanvas._elem.offset(),d={x:a.pageX-c.left,y:a.pageY-c.top},e={xaxis:null,yaxis:null,x2axis:null,y2axis:null,y3axis:null,y4axis:null,y5axis:null,y6axis:null,y7axis:null,y8axis:null,y9axis:null,yMidAxis:null},f=["xaxis","yaxis","x2axis","y2axis","y3axis","y4axis","y5axis","y6axis","y7axis","y8axis","y9axis","yMidAxis"],g=b.axes,h=11;h>0;h--)i=f[h-1],g[i].show&&(e[i]=g[i].series_p2u(d[i.charAt(0)]));return{offsets:c,gridPos:d,dataPos:e}},f=function(b){var c,d,f,g,h,i,j,k,l,m,n=function(){var b,c={};i?(a.isPlainObject(i)&&a.extend(!0,c,i),j.replot(c),m&&k&&(b=j.series[l],b.shadowCanvas._elem&&b.shadowCanvas._elem.hide().fadeIn(k),b.canvas._elem.hide().fadeIn(k),b.canvas._elem.nextAll(".jqplot-point-label.jqplot-series-"+b.index).hide().fadeIn(k))):b=j.series[l]};c=e(b),d=b.data.plot,f=a.Event("jqplotLegendToggleSerie"),f.pageX=b.pageX,f.pageY=b.pageY,g=b.data,h=g.series,i=g.replot,j=g.plot,k=g.speed,l=h.index,m=!1,f.name=d.series[l].label,a(this).trigger(f,[c.gridPos,c.dataPos,d]),(h.canvas._elem.is(":hidden")||!h.show)&&(m=!0),h.toggleDisplay(b,n)};a.jqplot.EnhancedLegendRenderer=function(){a.jqplot.TableLegendRenderer.call(this)},a.jqplot.EnhancedLegendRenderer.prototype=new a.jqplot.TableLegendRenderer,a.jqplot.EnhancedLegendRenderer.prototype.constructor=a.jqplot.EnhancedLegendRenderer,a.jqplot.EnhancedLegendRenderer.prototype.init=function(c,e){this.numberRows=null,this.numberColumns=null,this.seriesToggle="normal",this.seriesToggleReplot=!1,this.disableIEFading=!0,this.legendTextColor="swatch",a.extend(!0,this,c),this.seriesToggle&&a.jqplot.postDrawHooks.push(d),e.postInitHooks.addOnce(b)},a.jqplot.EnhancedLegendRenderer.prototype.draw=function(b,c){var d,e,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w=this;if(!this.show)return this._elem;for(d=this._series,this._elem=a("<table/>",{"class":"jqplot-table-legend"}).css({position:"absolute",background:this.background,border:this.border,fontSize:this.fontSize,color:this.textColor,marginTop:this.marginTop,marginBottom:this.marginBottom,marginLeft:this.marginLeft,marginRight:this.marginRight}),this.seriesToggle&&this._elem.css("z-index","3"),g=!1,h=!1,this.numberRows?(i=this.numberRows,j=this.numberColumns?this.numberColumns:Math.ceil(d.length/i)):this.numberColumns?(j=this.numberColumns,i=Math.ceil(d.length/this.numberColumns)):(i=d.length,j=1),t=0,k=d.length-1;k>=0;k--)(1===j&&d[k]._stack||d[k].renderer.constructor===a.jqplot.BezierCurveRenderer)&&(h=!0);for(k=0;i>k;k++){for(m=a("<tr/>",{"class":"jqplot-table-legend"}),h?m.prependTo(this._elem):m.appendTo(this._elem),l=0;j>l;l++)t<d.length&&(d[t].show||d[t].showLabel)&&(e=d[t],p=this.labels[t]||e.label.toString(),p&&(u=e.color,g=h?k===i-1?!1:!0:k>0?!0:!1,q=g?this.rowSpacing:"0",n=a("<td/>",{"class":"jqplot-table-legend jqplot-table-legend-swatch"}).css({textAlign:"center",paddingTop:q}),r=a("<div/>",{"class":"jqplot-table-legend-swatch-outline"}),s=a("<div/>",{"class":"jqplot-table-legend-swatch"}).css({backgroundColor:u,borderColor:u}),n.append(r.append(s)),o=a("<td/>",{"class":"jqplot-table-legend jqplot-table-legend-label"}).css({paddingTop:q,color:"swatch"===w.legendTextColor?u:"inherit"}),this.escapeHtml?o.text(p):o.html(p),h?(this.showLabels&&o.prependTo(m),this.showSwatches&&n.prependTo(m)):(this.showSwatches&&n.appendTo(m),this.showLabels&&o.appendTo(m)),this.seriesToggle&&(("string"==typeof this.seriesToggle||"number"==typeof this.seriesToggle)&&(a.jqplot.use_excanvas&&this.disableIEFading||(v=this.seriesToggle)),this.showSwatches&&(n.bind("click",{series:e,speed:v,plot:c,replot:this.seriesToggleReplot},f),n.addClass("jqplot-seriesToggle")),this.showLabels&&(o.bind("click",{series:e,speed:v,plot:c,replot:this.seriesToggleReplot},f),o.addClass("jqplot-seriesToggle")),!e.show&&e.showLabel&&(n.addClass("jqplot-series-hidden"),o.addClass("jqplot-series-hidden"))),g=!0)),t++;n=o=r=s=null}return this._elem}}(jQuery);