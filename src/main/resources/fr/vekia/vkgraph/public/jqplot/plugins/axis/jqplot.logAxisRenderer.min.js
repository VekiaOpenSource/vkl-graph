!function(a){a.jqplot.LogAxisRenderer=function(){a.jqplot.LinearAxisRenderer.call(this),this.axisDefaults={base:10,tickDistribution:"power"}},a.jqplot.LogAxisRenderer.prototype=new a.jqplot.LinearAxisRenderer,a.jqplot.LogAxisRenderer.prototype.constructor=a.jqplot.LogAxisRenderer,a.jqplot.LogAxisRenderer.prototype.init=function(b){this.drawBaseline=!0,this.minorTicks="auto",this._scalefact=1,a.extend(!0,this,b),this._autoFormatString="%d",this._overrideFormatString=!1;for(var c in this.renderer.axisDefaults)null==this[c]&&(this[c]=this.renderer.axisDefaults[c]);this.resetDataBounds()},a.jqplot.LogAxisRenderer.prototype.createTicks=function(b){var c,d,e,f,g,h=(this._ticks,this.ticks),i=(this.name,this._dataBounds),j="x"===this.name.charAt(0)?this._plotDimensions.width:this._plotDimensions.height,k=30;if(this._scalefact=(Math.max(j,k+1)-k)/300,h.length){for(g=0;g<h.length;g++){var l=h[g],m=new this.tickRenderer(this.tickOptions);l.constructor==Array?(m.value=l[0],m.label=l[1],this.showTicks?this.showTickMarks||(m.showMark=!1):(m.showLabel=!1,m.showMark=!1),m.setTick(l[0],this.name),this._ticks.push(m)):a.isPlainObject(l)?(a.extend(!0,m,l),m.axis=this.name,this._ticks.push(m)):(m.value=l,this.showTicks?this.showTickMarks||(m.showMark=!1):(m.showLabel=!1,m.showMark=!1),m.setTick(l,this.name),this._ticks.push(m))}this.numberTicks=h.length,this.min=this._ticks[0].value,this.max=this._ticks[this.numberTicks-1].value}else if(null==this.min&&null==this.max){if(d=i.min*(2-this.padMin),e=i.max*this.padMax,d==e){var n=.05;d*=1-n,e*=1+n}if(null!=this.min&&this.min<=0)throw new Error("Log axis minimum must be greater than 0");if(null!=this.max&&this.max<=0)throw new Error("Log axis maximum must be greater than 0");var o,p;o=Math.pow(this.base,Math.floor(Math.log(d)/Math.log(this.base))),p=Math.pow(this.base,Math.ceil(Math.log(e)/Math.log(this.base))),0===o&&(o=1);var q=Math.round(Math.log(o)/Math.LN10);null!=this.tickOptions&&this.tickOptions.formatString||(this._overrideFormatString=!0),this.min=o,this.max=p;var r,s=(this.max-this.min,"auto"===this.minorTicks?0:this.minorTicks);if(null==this.numberTicks)if(j>140){if(r=Math.round(Math.log(this.max/this.min)/Math.log(this.base)+1),2>r&&(r=2),0===s){var t=j/(r-1);s=100>t?0:190>t?1:250>t?3:600>t?4:9}}else r=2,0===s&&(s=1),s=0;else r=this.numberTicks;if(q>=0&&3!==s)this._autoFormatString="%d";else if(0>=q&&3===s){var t=-(q-1);this._autoFormatString="%."+Math.abs(q-1)+"f"}else if(0>q){var t=-q;this._autoFormatString="%."+Math.abs(q)+"f"}else this._autoFormatString="%d";for(var m,u,v,w,c,g=0;r>g;g++)if(f=Math.pow(this.base,g-r+1)*this.max,m=new this.tickRenderer(this.tickOptions),this._overrideFormatString&&(m.formatString=this._autoFormatString),this.showTicks?this.showTickMarks||(m.showMark=!1):(m.showLabel=!1,m.showMark=!1),m.setTick(f,this.name),this._ticks.push(m),s&&r-1>g){v=Math.pow(this.base,g-r+2)*this.max,w=v-f,c=v/(s+1);for(var x=s-1;x>=0;x--)u=v-c*(x+1),m=new this.tickRenderer(this.tickOptions),this._overrideFormatString&&""!=this._autoFormatString&&(m.formatString=this._autoFormatString),this.showTicks?this.showTickMarks||(m.showMark=!1):(m.showLabel=!1,m.showMark=!1),m.setTick(u,this.name),this._ticks.push(m)}}else if(null!=this.min&&null!=this.max){var y,z,A=a.extend(!0,{},this.tickOptions,{name:this.name,value:null});if(null==this.numberTicks&&null==this.tickInterval){var B=Math.max(j,k+1),C=Math.ceil((B-k)/35+1),D=a.jqplot.LinearTickGenerator.bestConstrainedInterval(this.min,this.max,C);this._autoFormatString=D[3],y=D[2],z=D[4];for(var g=0;y>g;g++)A.value=this.min+g*z,m=new this.tickRenderer(A),this._overrideFormatString&&""!=this._autoFormatString&&(m.formatString=this._autoFormatString),this.showTicks?this.showTickMarks||(m.showMark=!1):(m.showLabel=!1,m.showMark=!1),this._ticks.push(m)}else if(null!=this.numberTicks&&null!=this.tickInterval){y=this.numberTicks;for(var g=0;y>g;g++)A.value=this.min+g*this.tickInterval,m=new this.tickRenderer(A),this._overrideFormatString&&""!=this._autoFormatString&&(m.formatString=this._autoFormatString),this.showTicks?this.showTickMarks||(m.showMark=!1):(m.showLabel=!1,m.showMark=!1),this._ticks.push(m)}}},a.jqplot.LogAxisRenderer.prototype.pack=function(b,c){var d=parseInt(this.base,10),e=this._ticks,f=function(a){return Math.log(a)/Math.log(d)},g=function(a){return Math.pow(Math.E,Math.log(d)*a)},h=f(this.max),i=f(this.min),j=c.max,k=c.min,l=null==this._label?!1:this._label.show;for(var m in b)this._elem.css(m,b[m]);this._offsets=c;var n=j-k,o=h-i;if(this.p2u=function(a){return g((a-k)*o/n+i)},this.u2p=function(a){return(f(a)-i)*n/o+k},"xaxis"==this.name||"x2axis"==this.name?(this.series_u2p=function(a){return(f(a)-i)*n/o},this.series_p2u=function(a){return g(a*o/n+i)}):(this.series_u2p=function(a){return(f(a)-h)*n/o},this.series_p2u=function(a){return g(a*o/n+h)}),this.show)if("xaxis"==this.name||"x2axis"==this.name){for(var p=0;p<e.length;p++){var q=e[p];if(q.show&&q.showLabel){var r;if(q.constructor==a.jqplot.CanvasAxisTickRenderer&&q.angle)switch(q.labelPosition){case"auto":r=q.angle<0?-q.getWidth()+q._textRenderer.height*Math.sin(-q._textRenderer.angle)/2:-q._textRenderer.height*Math.sin(q._textRenderer.angle)/2;break;case"end":r=-q.getWidth()+q._textRenderer.height*Math.sin(-q._textRenderer.angle)/2;break;case"start":r=-q._textRenderer.height*Math.sin(q._textRenderer.angle)/2;break;case"middle":r=-q.getWidth()/2+q._textRenderer.height*Math.sin(-q._textRenderer.angle)/2;break;default:r=-q.getWidth()/2+q._textRenderer.height*Math.sin(-q._textRenderer.angle)/2}else r=-q.getWidth()/2;var s=this.u2p(q.value)+r+"px";q._elem.css("left",s),q.pack()}}if(l){var t=this._label._elem.outerWidth(!0);this._label._elem.css("left",k+n/2-t/2+"px"),"xaxis"==this.name?this._label._elem.css("bottom","0px"):this._label._elem.css("top","0px"),this._label.pack()}}else{for(var p=0;p<e.length;p++){var q=e[p];if(q.show&&q.showLabel){var r;if(q.constructor==a.jqplot.CanvasAxisTickRenderer&&q.angle)switch(q.labelPosition){case"auto":case"end":r=q.angle<0?-q._textRenderer.height*Math.cos(-q._textRenderer.angle)/2:-q.getHeight()+q._textRenderer.height*Math.cos(q._textRenderer.angle)/2;break;case"start":r=q.angle>0?-q._textRenderer.height*Math.cos(-q._textRenderer.angle)/2:-q.getHeight()+q._textRenderer.height*Math.cos(q._textRenderer.angle)/2;break;case"middle":r=-q.getHeight()/2;break;default:r=-q.getHeight()/2}else r=-q.getHeight()/2;var s=this.u2p(q.value)+r+"px";q._elem.css("top",s),q.pack()}}if(l){var u=this._label._elem.outerHeight(!0);this._label._elem.css("top",j-n/2-u/2+"px"),"yaxis"==this.name?this._label._elem.css("left","0px"):this._label._elem.css("right","0px"),this._label.pack()}}}}(jQuery);