!function(a){"use strict";a.jqplot.CategoryAxisRenderer=function(b){a.jqplot.LinearAxisRenderer.call(this),this.sortMergedLabels=!1},a.jqplot.CategoryAxisRenderer.prototype=new a.jqplot.LinearAxisRenderer,a.jqplot.CategoryAxisRenderer.prototype.constructor=a.jqplot.CategoryAxisRenderer,a.jqplot.CategoryAxisRenderer.prototype.init=function(b){var c,d,e,f,g,h;for(this.groups=1,this.groupLabels=[],this._groupLabels=[],this._grouped=!1,this._barsPerGroup=null,this.reverse=!1,a.extend(!0,this,{tickOptions:{formatString:"%d"}},b),c=this._dataBounds,d=0,h=this._series.length;h>d;d++)for(f=this._series[d],f.groups&&(this.groups=f.groups),g=f.data,e=0;e<g.length;e++)"xaxis"===this.name||"x2axis"===this.name?((null===c.min||g[e][0]<c.min)&&(c.min=g[e][0]),(null===c.max||g[e][0]>c.max)&&(c.max=g[e][0])):((null===c.min||g[e][1]<c.min)&&(c.min=g[e][1]),(null===c.max||g[e][1]>c.max)&&(c.max=g[e][1]));this.groupLabels.length&&(this.groups=this.groupLabels.length)},a.jqplot.CategoryAxisRenderer.prototype.createTicks=function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;if(b=this._ticks,c=this.ticks,d=this.name,e=this._dataBounds,c.length){if(this.groups>1&&!this._grouped){for(m=c.length,l=parseInt(m/this.groups,10),p=0,j=l;m>j;j+=l)c.splice(j+p,0," "),p++;this._grouped=!0}for(this.min=.5,this.max=c.length+.5,q=this.max-this.min,this.numberTicks=2*c.length+1,j=0;j<c.length;j++)i=this.min+2*j*q/(this.numberTicks-1),n=new this.tickRenderer(this.tickOptions),n.showLabel=!1,n.setTick(i,this.name),this._ticks.push(n),n=new this.tickRenderer(this.tickOptions),n.label=c[j],n.showMark=!1,n.showGridline=!1,n.setTick(i+.5,this.name),this._ticks.push(n);n=new this.tickRenderer(this.tickOptions),n.showLabel=!1,n.setTick(i+1,this.name),this._ticks.push(n)}else{for(f="xaxis"===d||"x2axis"===d?this._plotDimensions.width:this._plotDimensions.height,null!==this.min&&null!==this.max&&null!==this.numberTicks&&(this.tickInterval=null),null!==this.min&&null!==this.max&&null!==this.tickInterval&&parseInt((this.max-this.min)/this.tickInterval,10)!==(this.max-this.min)/this.tickInterval&&(this.tickInterval=null),r=[],s=0,g=.5,t=!1,j=0;j<this._series.length;j++)for(o=this._series[j],k=0;k<o.data.length;k++)y="xaxis"===this.name||"x2axis"===this.name?o.data[k][0]:o.data[k][1],-1===a.inArray(y,r)&&(t=!0,s+=1,r.push(y));for(t&&this.sortMergedLabels&&("string"==typeof r[0]?r.sort():r.sort(function(a,b){return a-b})),this.ticks=r,j=0;j<this._series.length;j++)for(o=this._series[j],k=0;k<o.data.length;k++)y="xaxis"===this.name||"x2axis"===this.name?o.data[k][0]:o.data[k][1],u=a.inArray(y,r)+1,"xaxis"===this.name||"x2axis"===this.name?o.data[k][0]=u:o.data[k][1]=u;if(this.groups>1&&!this._grouped){for(v=r.length,l=parseInt(v/this.groups,10),p=0,j=l;v>j;j+=l+1)r[j]=" ";this._grouped=!0}for(h=s+.5,null===this.numberTicks&&(this.numberTicks=2*s+1),q=h-g,this.min=g,this.max=h,w=0,x=parseInt(3+f/10,10),l=parseInt(s/x,10),null==this.tickInterval&&(this.tickInterval=q/(this.numberTicks-1)),j=0;j<this.numberTicks;j++)i=this.min+j*this.tickInterval,n=new this.tickRenderer(this.tickOptions),j/2===parseInt(j/2,10)?(n.showLabel=!1,n.showMark=this.tickOptions.showMark):(l>0&&l>w?(n.showLabel=!1,w+=1):(n.showLabel=!0,w=0),n.label=n.formatter(n.formatString,r[(j-1)/2]),n.showMark=!1,n.showGridline=!1),n.setTick(i,this.name),this._ticks.push(n)}},a.jqplot.CategoryAxisRenderer.prototype.draw=function(b,c){var d,e,f,g,h;if(!this.show)return this._elem;for(this.renderer.createTicks.call(this),d=0,this._elem&&this._elem.emptyForce(),this._elem=this._elem||a('<div class="jqplot-axis jqplot-'+this.name+'" style="position:absolute;"></div>'),"xaxis"===this.name||"x2axis"===this.name?this._elem.width(this._plotDimensions.width):this._elem.height(this._plotDimensions.height),this.labelOptions.axis=this.name,this._label=new this.labelRenderer(this.labelOptions),this._label.show&&(g=this._label.draw(b,c),g.appendTo(this._elem)),e=this._ticks,f=0;f<e.length;f++)h=e[f],!h.showLabel||h.isMinorTick&&!this.showMinorTicks||(g=h.draw(b,c),g.appendTo(this._elem));for(this._groupLabels=[],f=0;f<this.groupLabels.length;f++)g=a('<div style="position:absolute;" class="jqplot-'+this.name+'-groupLabel"></div>'),g.html(this.groupLabels[f]),this._groupLabels.push(g),g.appendTo(this._elem);return this._elem},a.jqplot.CategoryAxisRenderer.prototype.set=function(){var b,c,d,e,f,g,h,i,j,k;if(b=0,e=0,f=0,g=null==this._label?!1:this._label.show,this.show){for(h=this._ticks,i=0;i<h.length;i++)k=h[i],!k.showLabel||k.isMinorTick&&!this.showMinorTicks||(d="xaxis"===this.name||"x2axis"===this.name?k._elem.outerHeight(!0):k._elem.outerWidth(!0),d>b&&(b=d));for(c=0,i=0;i<this._groupLabels.length;i++)j=this._groupLabels[i],d="xaxis"===this.name||"x2axis"===this.name?j.outerHeight(!0):j.outerWidth(!0),d>c&&(c=d);g&&(e=this._label._elem.outerWidth(!0),f=this._label._elem.outerHeight(!0)),"xaxis"===this.name?(b+=c+f,this._elem.css({height:b+"px",left:"0px",bottom:"0px"})):"x2axis"===this.name?(b+=c+f,this._elem.css({height:b+"px",left:"0px",top:"0px"})):"yaxis"===this.name?(b+=c+e,this._elem.css({width:b+"px",left:"0px",top:"0px"}),g&&this._label.constructor===a.jqplot.AxisLabelRenderer&&this._label._elem.css("width",e+"px")):(b+=c+e,this._elem.css({width:b+"px",right:"0px",top:"0px"}),g&&this._label.constructor===a.jqplot.AxisLabelRenderer&&this._label._elem.css("width",e+"px"))}},a.jqplot.CategoryAxisRenderer.prototype.pack=function(b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s=this._ticks,t=this.max,u=this.min,v=c.max,w=c.min,x=null==this._label?!1:this._label.show;for(f in b)this._elem.css(f,b[f]);if(this._offsets=c,g=v-w,h=t-u,this.reverse?(this.u2p=function(a){return w+(t-a)*g/h},this.p2u=function(a){return u+(a-w)*h/g},"xaxis"===this.name||"x2axis"===this.name?(this.series_u2p=function(a){return(t-a)*g/h},this.series_p2u=function(a){return a*h/g+t}):(this.series_u2p=function(a){return(u-a)*g/h},this.series_p2u=function(a){return a*h/g+u})):(this.u2p=function(a){return(a-u)*g/h+w},this.p2u=function(a){return(a-w)*h/g+u},"xaxis"===this.name||"x2axis"===this.name?(this.series_u2p=function(a){return(a-u)*g/h},this.series_p2u=function(a){return a*h/g+u}):(this.series_u2p=function(a){return(a-t)*g/h},this.series_p2u=function(a){return a*h/g+t})),this.show)if("xaxis"===this.name||"x2axis"===this.name){for(d=0;d<s.length;d++)if(i=s[d],i.show&&i.showLabel){if(i.constructor===a.jqplot.CanvasAxisTickRenderer&&i.angle)switch(k="xaxis"==this.name?1:-1,i.labelPosition){case"auto":j=k*i.angle<0?-i.getWidth()+i._textRenderer.height*Math.sin(-i._textRenderer.angle)/2:-i._textRenderer.height*Math.sin(i._textRenderer.angle)/2;break;case"end":j=-i.getWidth()+i._textRenderer.height*Math.sin(-i._textRenderer.angle)/2;break;case"start":j=-i._textRenderer.height*Math.sin(i._textRenderer.angle)/2;break;case"middle":j=-i.getWidth()/2+i._textRenderer.height*Math.sin(-i._textRenderer.angle)/2;break;default:j=-i.getWidth()/2+i._textRenderer.height*Math.sin(-i._textRenderer.angle)/2}else j=-i.getWidth()/2;l=this.u2p(i.value)+j+"px",i._elem.css("left",l),i.pack()}for(m=["bottom",0],x&&(n=this._label._elem.outerWidth(!0),this._label._elem.css("left",w+g/2-n/2+"px"),"xaxis"===this.name?(this._label._elem.css("bottom","0px"),m=["bottom",this._label._elem.outerHeight(!0)]):(this._label._elem.css("top","0px"),m=["top",this._label._elem.outerHeight(!0)]),this._label.pack()),p=parseInt(this._ticks.length/this.groups,10)+1,d=0;d<this._groupLabels.length;d++){for(q=0,r=0,e=d*p;(d+1)*p>e;e++)e>=this._ticks.length-1||this._ticks[e]._elem&&" "!==this._ticks[e].label&&(i=this._ticks[e]._elem,f=i.position(),q+=f.left+i.outerWidth(!0)/2,r++);q/=r,this._groupLabels[d].css({left:q-this._groupLabels[d].outerWidth(!0)/2}),this._groupLabels[d].css(m[0],m[1])}}else{for(d=0;d<s.length;d++)if(i=s[d],i.show&&i.showLabel){if(i.constructor===a.jqplot.CanvasAxisTickRenderer&&i.angle)switch(k="yaxis"===this.name?1:-1,i.labelPosition){case"auto":case"end":j=k*i.angle<0?-i._textRenderer.height*Math.cos(-i._textRenderer.angle)/2:-i.getHeight()+i._textRenderer.height*Math.cos(i._textRenderer.angle)/2;break;case"start":j=i.angle>0?-i._textRenderer.height*Math.cos(-i._textRenderer.angle)/2:-i.getHeight()+i._textRenderer.height*Math.cos(i._textRenderer.angle)/2;break;case"middle":j=-i.getHeight()/2;break;default:j=-i.getHeight()/2}else j=-i.getHeight()/2;l=this.u2p(i.value)+j+"px",i._elem.css("top",l),i.pack()}for(m=["left",0],x&&(o=this._label._elem.outerHeight(!0),this._label._elem.css("top",v-g/2-o/2+"px"),"yaxis"===this.name?(this._label._elem.css("left","0px"),m=["left",this._label._elem.outerWidth(!0)]):(this._label._elem.css("right","0px"),m=["right",this._label._elem.outerWidth(!0)]),this._label.pack()),p=parseInt(this._ticks.length/this.groups,10)+1,d=0;d<this._groupLabels.length;d++){for(q=0,r=0,e=d*p;(d+1)*p>e;e++)e>=this._ticks.length-1||this._ticks[e]._elem&&" "!==this._ticks[e].label&&(i=this._ticks[e]._elem,f=i.position(),q+=f.top+i.outerHeight()/2,r++);q/=r,this._groupLabels[d].css({top:q-this._groupLabels[d].outerHeight()/2}),this._groupLabels[d].css(m[0],m[1])}}}}(jQuery);